---

- name: Download Cassandra tarball
  get_url: url={{ cassandra_download_url }} dest=/opt/
  when: "'{{ inventory_hostname }}' == '{{ active_master_inventory_hostname }}'"



- name: distribute Cassandra tarball
  synchronize:
    src: "/opt/{{ cassandra_file }}"
    dest: "/opt/{{ cassandra_file }}"
  delegate_to: "{{ active_master_inventory_hostname }}"

- name: unpack Cassandra
  unarchive: copy=no src=/opt/{{ cassandra_file }} dest=/opt

- name: symlink Cassandra
  file: src={{ cassandra_home }} dest=/opt/cassandra state=link

